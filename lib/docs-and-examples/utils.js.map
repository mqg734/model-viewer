{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../src/docs-and-examples/utils.ts"],"names":[],"mappings":"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","sourcesContent":["/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {convertJSONToHTML} from './create-html';\nimport {getSidebarCategoryForNewPage, sidebarObserver} from './sidebar';\n\nexport function switchPages(oldType: string, newType: string) {\n  if (oldType !== newType) {\n    // TODO: Handle going from examples back to docs (old state), possibly\n    // include a previous state to revert to in URI\n    const newSidebarCategory = getSidebarCategoryForNewPage();\n    const newURI = '../'.concat(newType, '/#', newSidebarCategory);\n    const d = document.createElement('a');\n    d.setAttribute('href', newURI);\n    window.location.href = d.href;\n  }\n}\n\nwindow.onscroll = function() {\n  stickyHeader()\n};\n\nfunction stickyHeader() {\n  const headers = document.getElementsByClassName('header');\n  for (let i = 0; i < headers.length; i++) {\n    const header = headers[i] as HTMLElement;\n    const sticky = header.offsetTop;\n    if (window.pageYOffset > sticky) {\n      header.classList.add('sticky');\n    } else {\n      header.classList.remove('sticky');\n    }\n  }\n}\n\nasync function fetchHtmlAsText(url: string): Promise<string> {\n  const response = await fetch(url);\n  return await response.text();\n}\n\nexport async function loadExamples() {\n  const loadingExample = document.getElementById('loading-examples');\n  loadingExample!.innerHTML =\n      await fetchHtmlAsText('../examples/lazy-loading.html');\n}\n\ninterface JSONCallback {\n  (response: string): void\n}\n\nfunction loadJSON(filePath: string, callback: JSONCallback) {\n  const xobj = new XMLHttpRequest();\n  xobj.overrideMimeType('application/json');\n  xobj.open('GET', filePath, true);\n  xobj.onreadystatechange = function() {\n    if (xobj.readyState === 4 && xobj.status === 200) {\n      callback(xobj.responseText);\n    }\n  };\n  xobj.send(null);\n}\n\n/*\n * On a page load if # is given, jump to section\n */\nfunction jumpToSection() {\n  const windowHref = window.location.href;\n  const hashtagIndex = windowHref.indexOf('#');\n  if (hashtagIndex >= 0 && windowHref.length > hashtagIndex) {\n    const jumpToId = windowHref.slice(hashtagIndex + 1);\n    const element = document.getElementById(jumpToId);\n    if (element) {\n      const fakeA = document.createElement('a');\n      fakeA.href = '#'.concat(jumpToId);\n      fakeA.click();\n    }\n  }\n}\n\n/* Load the JSON asynchronously, then generate the sidebarObserver after all the\n * documentation in the window.\n * docsOrExamples: 'docs' or 'examples'\n */\nexport function init(docsOrExamples: 'docs'|'examples') {\n  loadJSON('../data/loading.json', function(response: string) {\n    const actualJSON = JSON.parse(response);\n    convertJSONToHTML(actualJSON, docsOrExamples);\n    if (docsOrExamples === 'examples') {\n      loadExamples();\n    }\n    sidebarObserver(docsOrExamples);\n    jumpToSection();\n  });\n}\n\n(self as any).switchPages = switchPages;\n(self as any).init = init;"]}